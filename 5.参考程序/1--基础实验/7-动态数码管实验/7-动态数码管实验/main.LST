C51 COMPILER V9.01   MAIN                                                                  05/31/2024 15:50:15 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\dianzi\Keil C51\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REGX52.H>
   2          
   3          // 定义数码管段码口
   4          #define SMG P0 
   5          
   6          // 定义数码管位选信号控制脚
   7          sbit LSA = P2^2;
   8          sbit LSB = P2^3;
   9          sbit LSC = P2^4;
  10          
  11          // 共阴极数码管显示 0~F 的段码数据
  12          unsigned char gsmg_code[16] = {
  13              0x3f,  // 0
  14              0x06,  // 1
  15              0x5b,  // 2
  16              0x4f,  // 3
  17              0x66,  // 4
  18              0x6d,  // 5
  19              0x7d,  // 6
  20              0x07,  // 7
  21              0x7f,  // 8
  22              0x6f,  // 9
  23              0x77,  // A
  24              0x7c,  // B
  25              0x39,  // C
  26              0x5e,  // D
  27              0x79,  // E
  28              0x71   // F
  29          };
  30          
  31          // 延时函数，延时十微秒
  32          void delay_us(unsigned int ten_us) 
  33          {
  34   1          while(ten_us--);
  35   1      } 
  36          
  37          // 数码管显示函数
  38          void smg_display() 
  39          {
  40   1          unsigned int i = 0;
  41   1          for(i = 0; i < 8; i++) 
  42   1              {       
  43   2              // 设置位选信号
  44   2              switch(7 - i) 
  45   2                      {
  46   3                  case 0: 
  47   3                      LSC = 1; LSB = 1; LSA = 1;
  48   3                      break;
  49   3                  case 1: 
  50   3                      LSC = 1; LSB = 1; LSA = 0;
  51   3                      break;
  52   3                  case 2:     
  53   3                      LSC = 1; LSB = 0; LSA = 1;
  54   3                      break;
  55   3                  case 3: 
C51 COMPILER V9.01   MAIN                                                                  05/31/2024 15:50:15 PAGE 2   

  56   3                      LSC = 1; LSB = 0; LSA = 0;
  57   3                      break;
  58   3                  case 4: 
  59   3                      LSC = 0; LSB = 1; LSA = 1;
  60   3                      break;
  61   3                  case 5: 
  62   3                      LSC = 0; LSB = 1; LSA = 0;
  63   3                      break;
  64   3                  case 6: 
  65   3                      LSC = 0; LSB = 0; LSA = 1;
  66   3                      break;
  67   3                  case 7:     
  68   3                      LSC = 0; LSB = 0; LSA = 0;
  69   3                      break;
  70   3              }
  71   2              
  72   2              // 传送段选数据并延时
  73   2              SMG = gsmg_code[i]; 
  74   2              delay_us(100); 
  75   2              // 消隐
  76   2              SMG = 0x00; 
  77   2          }
  78   1      }
  79          
  80          // 主函数
  81          void main() 
  82          {
  83   1          while(1) 
  84   1              {
  85   2              smg_display(); // 循环显示数码管
  86   2          }
  87   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    141    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
