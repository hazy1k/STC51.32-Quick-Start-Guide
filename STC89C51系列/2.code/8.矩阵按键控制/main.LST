C51 COMPILER V9.01   MAIN                                                                  06/25/2024 19:44:05 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\dianzi\Keil C51\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <REGX52.H>
   2          
   3          // ╧╡рУ╪╚╤нбКйЩ╬щ
   4          unsigned char gsmg_code[17]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,
   5                          0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};    
   6          // ясй╠╨╞йЩ
   7          void delay_us(unsigned int ten_us)
   8          {
   9   1          while(ten_us--);    
  10   1      }
  11          
  12          // и╗цХ╨╞йЩ
  13          int key_scan()
  14          {
  15   1          unsigned int key_value; // ╤╗рЕ╪Эж╣
  16   1      
  17   1          P1 = 0xf7; // ╦Ь╣зр╩ап╦Ёж╣0ё╛фДсЮх╚н╙1ё╗╤Ч╫Ьжф1111 0111ё╘╢З╠М╣з1апн╙╣м╣Гф╫ё╛P1йга╛╫с╬ьуС╟╢╪Э╣д
  18   1      
  19   1          /* 
  20   1          н╙й╡ц╢©иртй╣ожуБ╦Ж╧╕дэё©
  21   1          уБпп╢ЗбКйг╫╚ P1 ╣дж╣иХн╙ 0xF7ё╛╪╢╤Ч╫Ьжфпнй╫н╙ 11110111║ё
  22   1          11110111╪╢╢З╠МакP1.7~P1.0,рБн╤веё╛P1.7~P1.4╨мP1.2~P1.0╠╩╦Ёж╣н╙1ё╛╤ЬP1.3╠╩╦Ёж╣н╙0
  23   1          ©╢нрцг╣д╫соъ╬мж╙╣ю-P1.3х╥й╣йг╫стзL1ио╣д-╪╢╢З╠Мак╣зр╩ап
  24   1          ╢с╤Ьнрцг╬ммЙЁиак╦Ь╣зр╩ап╦Ё0ё╗╪╢йДЁЖдёй╫ё╘╣д╡ывВ-фДкШн╩х╚╡╩╢Р©╙-ппапи╗цХ╥╗-
  25   1              ох╦Ьр╩апн╙╣м╣Гф╫ё╛фДсЮапн╙╦ъ╣Гф╫ё╛х╩╨Са╒╪╢╪Л╡Бр╩╢н╦Вппйг╥Ян╙╣м╣Гф╫ё╛хТ╪Л╡Б╣╫дЁр╩ппн╙╣м╣Гф╫ё╛тРнрцг╠Ц©их╥х
             -о╣╠г╟╠╩╟╢об╣д╪Эйгддр╩ппддр╩ап╣д
  26   1          */
  27   1      
  28   1          if(P1 != 0xf7) // еп╤о╣зр╩ап╟╢╪Эйг╥Я╟╢об-хГ╧Ш╟╢обё╗╪╢P1©з╡╩╣хсз1111 0111ё╘ж╢ппобцФсО╬Д
  29   1          {
  30   2              delay_us(1000);// оШ╤╤
  31   2              switch(P1) // ╠ё╢Ф╣зр╩ап╟╢╪Э╟╢об╨С╣д╪Эж╣    
  32   2              {
  33   3              /*
  34   3              обцФ╤т╠х╤нбКж╣ё╛ты╥╣╩ь╬мппакё╛в╒рБр╙╥╣╩ь╣зр╩ап╣дйЩ╬щЮ╩
  35   3              нрцг╬ыр╩╦ЖюЩвсё╛1234
  36   3                              5678
  37   3                              9ABC
  38   3                              DF
  39   3              ╠ххГ╣зр╩ап╣д5ё╛м╗╧Щ╡Ия╞╤нбКж╣ё╛йг0xb7
  40   3              дгц╢нрцгж╠╫сп╢case 0xb7 хця╜╩╥уруБ╦ЖйЩ╬щё╛хГ╧Шур╣╫акё╛╬м╥╣╩ь5ё╛х╩╨СйЩбК╧э╬мотй╬5ак
  41   3              */
  42   3                  case 0x77: 
  43   3                      key_value = 1;
  44   3                      break;
  45   3                  case 0xb7: 
  46   3                      key_value = 5;
  47   3                      break;
  48   3                  case 0xd7: 
  49   3                      key_value = 9;
  50   3                      break;
  51   3                  case 0xe7: 
  52   3                      key_value = 13; // D
  53   3                      break;
  54   3              }
C51 COMPILER V9.01   MAIN                                                                  06/25/2024 19:44:05 PAGE 2   

  55   2          }while(P1 != 0xf7); // ╣х╢Щ╟╢╪Эки©╙    
  56   1      
  57   1          P1 = 0xfb;//╦Ь╣з╤Чап╦Ёж╣0ё╛фДсЮх╚н╙1
  58   1          if(P1 != 0xfb)//еп╤о╣з╤Чап╟╢╪Эйг╥Я╟╢об
  59   1          {
  60   2              delay_us(1000);//оШ╤╤
  61   2              switch(P1)//╠ё╢Ф╣з╤Чап╟╢╪Э╟╢об╨С╣д╪Эж╣    
  62   2              {
  63   3                  case 0x7b: 
  64   3                      key_value = 2;
  65   3                      break;
  66   3                  case 0xbb: 
  67   3                      key_value = 6;
  68   3                      break;
  69   3                  case 0xdb: 
  70   3                      key_value = 10;
  71   3                      break;
  72   3                  case 0xeb: 
  73   3                      key_value = 14;
  74   3                      break;
  75   3              }
  76   2          }while(P1 != 0xfb);//╣х╢Щ╟╢╪Эки©╙    
  77   1      
  78   1          P1 = 0xfd; // ╦Ь╣зхЩап╦Ёж╣0ё╛фДсЮх╚н╙1
  79   1          if(P1 != 0xfd) // еп╤о╣зхЩап╟╢╪Эйг╥Я╟╢об
  80   1          {
  81   2              delay_us(1000); // оШ╤╤
  82   2              switch(P1) // ╠ё╢Ф╣зхЩап╟╢╪Э╟╢об╨С╣д╪Эж╣    
  83   2              {
  84   3                  case 0x7d: 
  85   3                      key_value = 3;
  86   3                      break;
  87   3                  case 0xbd: 
  88   3                      key_value = 7;
  89   3                      break;
  90   3                  case 0xdd: 
  91   3                      key_value = 11;
  92   3                      break;
  93   3                  case 0xed: 
  94   3                      key_value = 15;
  95   3                      break;
  96   3              }
  97   2          }while(P1 != 0xfd);//╣х╢Щ╟╢╪Эки©╙    
  98   1      
  99   1          P1 = 0xfe;//╦Ь╣зкдап╦Ёж╣0ё╛фДсЮх╚н╙1
 100   1          if(P1 != 0xfe)//еп╤о╣зкдап╟╢╪Эйг╥Я╟╢об
 101   1          {
 102   2              delay_us(1000);//оШ╤╤
 103   2              switch(P1)//╠ё╢Ф╣зкдап╟╢╪Э╟╢об╨С╣д╪Эж╣    
 104   2              {
 105   3                  case 0x7e: 
 106   3                      key_value = 4;
 107   3                      break;
 108   3                  case 0xbe: 
 109   3                      key_value = 8;
 110   3                      break;
 111   3                  case 0xde: 
 112   3                      key_value = 12;
 113   3                      break;
 114   3                  case 0xee: 
 115   3                      key_value = 16;
 116   3                      break;
C51 COMPILER V9.01   MAIN                                                                  06/25/2024 19:44:05 PAGE 3   

 117   3              }
 118   2          }while(P1 != 0xfe);//╣х╢Щ╟╢╪Эки©╙
 119   1      
 120   1          return key_value; // ╥╣╩ь╣ц╣╫╣дж╣       
 121   1      }
 122          
 123          
 124          // жВ╨╞йЩ
 125          void main()
 126          {    
 127   1          int key; // ╤╗рЕпХр╙╥╣╩ь╣дж╣
 128   1      
 129   1          while(1)
 130   1          {
 131   2              key = key_scan(); // ╥╣╩ьж╣╪╢╨╞йЩжп╥╣╩ь╣дж╣
 132   2              if(key != 0)
 133   2                  P0 = ~gsmg_code[key-1]; // ╣ц╣╫╣д╟╢╪Эж╣╪У1╩╩кЦЁийЩвИоб╠Й╤тс╕0-F╤нбК
 134   2              // н╙й╡ц╢пХр╙╪У1дьё©ё╗1~fё╘    ║╒
 135   2              // рРн╙я╖╧ЩCсОятж╙╣юё╛йЩвИ╣доб╠Ййг╢с0©╙й╪╣дё╛╤Ь╪Эж╣йг╢с1©╙й╪╣дё╛кЫртр╙keyр╙╪У1╡едэ╤т╣циойЩвИ
 136   2          }        
 137   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    269    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     17    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
